<!doctype html><meta charset="utf-8">
<title>CSI • Analyse des plannings</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" href="data:,">
<style>
  :root{--bg:#0b1020;--card:#111833;--text:#e6e9f2;--muted:#9aa3b2;--accent:#6aa1ff;--err:#ef4444}
  *{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#0b1020,#0e1630);}
  .wrap{max-width:880px;margin:48px auto;padding:0 20px;color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  .card{background:var(--card);border:1px solid #1b254a;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.3);padding:24px}
  h1{margin:0 0 12px;font-size:28px} p.muted{color:var(--muted);margin:0 0 16px}
  label{display:block;margin:12px 0 6px;color:#c8d2ea}
  input[type=url]{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #26325f;background:#0d1330;color:#eaf1ff;outline:none}
  .row{display:flex;gap:12px;margin-top:16px}
  button{cursor:pointer;border:1px solid #2a3a75;background:#1a2a6a;color:#eaf1ff;padding:12px 16px;border-radius:12px}
  button:hover{background:#21347e}
  .err{color:var(--err);margin-top:8px;display:none}
  small{color:var(--muted)}
</style>

<div class="wrap">
  <div class="card">
    <h1>Analyse des plannings</h1>
    <p class="muted">Colle l’URL de la page planning puis clique <b>Analyser</b>. Tu seras redirigé vers la page d’analyse.</p>

    <label for="planning-url">URL du planning</label>
    <input id="planning-url" type="url" placeholder="https://exemple.tld/planning" />

    <div class="row">
      <button id="btn-analyze">Analyser</button>
      <a href="/docs" target="_blank" style="align-self:center;color:var(--accent);text-decoration:none">Docs API →</a>
    </div>

    <div id="error-status" class="err">❌ Erreur</div>

    <p><small>Ou appelle directement l’API <code>POST /plannings/analyze</code> (voir Docs).</small></p>
  </div>
</div>

<script>
  document.getElementById("btn-analyze").addEventListener("click", () => {
    const url = document.getElementById("planning-url").value.trim();
    const err = document.getElementById("error-status");
    err.style.display = "none";
    if (!url) {
      err.textContent = "❌ Merci de saisir une URL.";
      err.style.display = "block";
      return;
    }
    window.location.href = "/analyse-planning?u=" + encodeURIComponent(url);
  });
</script>
